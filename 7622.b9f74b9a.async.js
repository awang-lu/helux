"use strict";(self.webpackChunkhelux_docs=self.webpackChunkhelux_docs||[]).push([[7622],{47622:function(Ft,Ne,Ie){Ie.d(Ne,{TT:function(){return Ct},P2:function(){return Se},_x:function(){return ve},OA:function(){return xt},limuUtils:function(){return Pt},Xl:function(){return Vt},Uy:function(){return vt}});const bt=3,Be="3.12.3",U=Symbol("M"),ie=Symbol("V"),ce=Symbol("IMMUT_BASE"),H=Symbol("IS_RAW"),A="Map",x="Set",S="Array",Ke="Object",ze=[Symbol.iterator,Symbol.toStringTag,H],Le={Map:A,Set:x,Array:S},k="[object Object]",Y="[object Map]",G="[object Set]",X="[object Array]",$="[object Function]",Ue={[Y]:A,[G]:x,[X]:S,[k]:Ke},He=["push","pop","shift","splice","unshift","reverse","copyWithin","delete","fill"],Ye=["set","clear","delete"],Ge=["add","clear","delete"],We=["splice","sort","unshift","shift"],Je=["concat","copyWithin","entries","every","fill","filter","find","findIndex","flat","flatMap","forEach","includes","indexOf","join","keys","lastIndexOf","map","pop","push","reduce","reduceRight","reverse","shift","unshift","slice","some","sort","splice","values","valueOf"],ke=["clear","delete","entries","forEach","get","has","keys","set","values"],Xe=["add","clear","delete","entries","forEach","has","keys","values"],ae={[A]:ke,[x]:Xe,[S]:Je},$e={[A]:["clear","set","delete"],[x]:["clear","add","delete"],[S]:["pop","push","shift","unshift","splice","sort","copyWithin"]},qe={[A]:["forEach","get"],[x]:["forEach"],[S]:["forEach","map"]},B={value:0,usablePrefix:1},le={autoFreeze:!1,fastModeRange:"array"},Qe=Object.prototype.toString,Ze=!!Reflect,je=Object.prototype.hasOwnProperty;function ue(e,t){return Ze?Reflect.has(e,t):je.call(e,t)}function et(e,t,n,r){const o=(s,u,a)=>{T(s)||(r(s,u,a),Array.isArray(s)&&s.forEach((i,p)=>{o(i,s,p)}),W(s)&&s.forEach((i,p)=>{o(i,s,p)}),K(s)&&Object.keys(s).forEach(i=>{o(s[i],s,i)}))};o(e,t,n)}function w(e){return Qe.call(e)}function N(...e){return e}function K(e){return w(e)===k}function W(e){return w(e)===Y}function q(e){return w(e)===G}function F(e){return w(e)===$}function fe(e){var t=w(e);return Ue[t]}function T(e){const t=w(e);return![k,X,Y,G,$].includes(t)}function pe(e){return e.constructor.name==="AsyncFunction"||typeof e.then=="function"}function de(e){return typeof Promise!="undefined"&&e instanceof Promise}function Q(e){var t=typeof e;return t==="number"?!0:t==="string"?/^[0-9]*$/.test(e):!1}function tt(e){return typeof e=="symbol"}function nt(e){var t;return e&&(t=e[H])!==null&&t!==void 0?t:!1}const rt={[X]:Array.prototype,[Y]:Map.prototype,[G]:Set.prototype,[$]:Function.prototype};function ot(e){const t=w(e),n=rt[t]||Object.prototype,r=Object.create(null);return Object.setPrototypeOf(r,n),Object.setPrototypeOf(e,r),e}const Z=new Map;function z(e){e.rootMeta.modified=!0;const t=n=>{n&&!n.modified&&(n.modified=!0,t(n.parentMeta))};t(e)}function j(e,t,n){if(n.apiCtx.debug){const{fast:r}=n;r?e[U]=t:(ot(e),e.__proto__[U]=t)}return e}function st(e,t,n){const r=[t],o=D(e,n);if(o&&o.level>0){const{keyPath:s}=o;return[...s,t]}return r}function it(e,t,n){const{ver:r,parentMeta:o=null,immutBase:s,compareVer:u,apiCtx:a,hasOnOperate:i}=n,p=fe(t);let d=[],c=0,g=null;o&&(g=o.copy,c=at(g,a),d=st(g,e,a));const y={rootMeta:null,parentMeta:o,parent:g,selfType:p,self:t,copy:null,key:e,keyPath:d,level:c,proxyVal:null,proxyItems:null,modified:!1,scopes:[],isImmutBase:s,isDel:!1,isFast:!1,isArrOrderChanged:!1,newNodeStats:{},newNodeMap:new Map,newNodes:[],ver:r,compareVer:u,revoke:N,hasOnOperate:i,execOnOperate:N};return c===0?y.rootMeta=y:y.rootMeta=o.rootMeta,y}function ye(e){const t=ee(e);return t?!t.isImmutBase:!1}function ct(){B.value>=Number.MAX_SAFE_INTEGER?(B.value=1,B.usablePrefix+=1):B.value+=1;const{value:e,usablePrefix:t}=B;return`${t}_${e}`}function at(e,t){const n=b(e,t);return n?n.level+1:1}function D(e,t){return t.metaMap.get(e)}function b(e,t){let n=t||Me(e);return(n==null?void 0:n.metaMap.get(e))||null}function me(e){return e&&e[ie]||""}function Me(e){const t=me(e);return Z.get(t)||null}function ee(e){const t=Me(e);return t&&t.metaMap.get(e)||null}function he(e,t){const n=ee(e),r=ee(t);if(!n&&!r)return!Object.is(e,t);const{self:o,modified:s,compareVer:u,ver:a,level:i}=n||{self:e,modified:!1,compareVer:!1,ver:"0",level:0},{self:p,modified:d,compareVer:c,ver:g,level:y}=r||{self:t,modified:!1,compareVer:!1,ver:"0",level:0};return o!==p||(u||c)&&(i===0||y===0)&&a!==g?!0:s||d}function lt(e,t,n=!0){const r=n?he:Object.is;return!((u,a)=>{for(let i in u)if(!(i in a))return!0;for(let i in a)if(r(u[i],a[i]))return!0;return!1})(e,t)}function Nt(e){const t=n=>{if(isPrimitive(n))return n;let r=n;if(Array.isArray(n)&&(r=n.slice(),r.forEach((o,s)=>{r[s]=t(o)})),isSet(n)){const o=Array.from(n);o.forEach((s,u)=>{o[u]=t(s)}),r=new Set(o)}return isMap(n)&&(r=new Map(n),r.forEach((o,s)=>{r.set(s,t(o))})),isObject(n)&&(r={},Object.keys(n).forEach(o=>{r[o]=t(n[o])})),r};return t(e)}function ut(e,t){const{parentType:n,fastModeRange:r}=t;if(Array.isArray(e))return{copy:e.slice(),fast:!1};const o=r==="array"&&n===S||r==="all";let s=e;return e&&K(e)&&(s=Object.assign({},e)),W(e)&&(s=new Map(e)),q(e)&&(s=new Set(e)),{copy:s,fast:o}}function ft(e,t,n){const{apiCtx:r,immutBase:o}=n;if(o)return{copy:e,fast:!1};const{copy:s,fast:u}=ut(e,n);return j(s,t,{apiCtx:r,fast:u}),{copy:s,fast:u}}function pt(e,t,n){const{copy:r,isArrOrderChanged:o}=e,{targetNode:s,key:u}=n;if(o){const a=r.findIndex(i=>i===t.copy);a>=0&&(r[a]=s);return}r[u]=s}function dt(e,t){return K(e)?me(e)===t:!0}function yt(e,t){const{debug:n}=t,r=new Map;t.newNodeMap.forEach(o=>{const{node:s,parent:u,key:a}=o,i=r.get(s);if(i){u[a]=i;return}const p=o;et(s,u,a,(d,c,g)=>{const y=b(d,t);if(y){const{modified:O,copy:E,self:h}=y,P=O?E:h;c[g]=P}}),p.target=u[a],r.set(s,p.target)}),e.scopes.forEach(o=>{const{modified:s,copy:u,parentMeta:a,key:i,self:p,revoke:d,proxyVal:c,isDel:g,isFast:y}=o;if(!u||(n&&(y?delete u[U]:delete u.__proto__[U]),!a))return d();const O=s?u:p,E=a.copy,h=a.selfType;if(h===A)return E.set(i,O),d();if(h===x)return E.delete(c),E.add(O),d();if(h===S)return pt(a,o,{targetNode:O,key:i}),d();if(g!==!0)return E[i]=O,d()}),e.scopes.length=0}function mt(e,t){const{self:n,copy:r,modified:o}=e;let s=n;return r&&o&&(s=e.copy),yt(e,t),s}function _e(e){e.rootMeta.scopes.push(e)}function ge(e,t,n){const{traps:r,parentType:o,fastModeRange:s,immutBase:u,apiCtx:a}=n,i=it(e,t,n),{copy:p,fast:d}=ft(t,i,{immutBase:u,parentType:o,fastModeRange:s,apiCtx:a});if(i.copy=p,i.isFast=d,u){const c=new Proxy(p,r);i.proxyVal=c,i.revoke=N}else{const c=Proxy.revocable(p,r);i.proxyVal=c.proxy,i.revoke=c.revoke}return a.metaMap.set(p,i),a.metaMap.set(i.proxyVal,i),i}function Mt(e,t){return e===S?!0:(qe[e]||[]).includes(t)}function ht(e,t){const{key:n,parentMeta:r,parent:o,parentType:s,fastModeRange:u,readOnly:a,apiCtx:i}=t;let p=e;if(a&&r&&!F(e)){const{copy:c,self:g}=r,y=g[n];if(p!==y){const O=i.metaMap.get(p);O&&(i.metaMap.delete(p),i.metaMap.delete(O.proxyVal)),c[n]=y,p=y}}const d=(c,g)=>{const y=g||"";if(T(c)||!c)return c;if(!r)throw new Error("[[ createMeta ]]: meta should not be null");if(!F(c)){if(r.newNodeStats[y]||c[H])return c;let E=D(c,i);return E||(E=ge(y,c,t),_e(E),r.selfType===A?o.set(y,E.copy):o[y]=E.copy),E.proxyVal}if(!Mt(s,y)||r.proxyItems)return c;let O=[];if(s===x){const E=new Set;o.forEach(h=>E.add(d(h))),Oe(E,r,{dataType:x,apiCtx:i}),O=j(E,r,{fast:u,apiCtx:i}),r.copy=O}else if(s===A){const E=new Map;o.forEach((h,P)=>E.set(P,d(h,P))),Oe(E,r,{dataType:A,apiCtx:i}),O=j(E,r,{fast:u,apiCtx:i}),r.copy=O}else s===S&&y!=="sort"&&(r.copy=r.copy||o.slice(),O=r.proxyVal);return r.proxyItems=O,c};return d(p,n)}function Ee(e,t){if(!K(e))return e;const n=D(e,t);return n?n.copy:e}function Oe(e,t,n){const{dataType:r,apiCtx:o}=n,s=e.delete.bind(e),u=e.clear.bind(e);if(e.delete=function(...i){return z(t),s(...i)},e.clear=function(...i){return z(t),u(...i)},r===x){const a=e.add.bind(e);e.add=function(...p){return z(t),a(...p)}}if(r===A){const a=e.set.bind(e),i=e.get.bind(e);e.set=function(...d){if(z(t),t.hasOnOperate){const c=d[1];t.rootMeta.execOnOperate("set",d[0],{mayProxyVal:c,value:c,parentMeta:t})}return a(...d)},e.get=function(...d){const c=i(...d);if(t.hasOnOperate){const g=b(c,o),y=g?g.copy||g.self:c;t.rootMeta.execOnOperate("get",d[0],{mayProxyVal:c,value:y,parentMeta:t,isChanged:!1})}return c}}}function _t(e){const{calledBy:t,parentMeta:n,op:r,parentType:o}=e;(["deleteProperty","set"].includes(t)||t==="get"&&(o===x&&Ge.includes(r)||o===S&&He.includes(r)||o===A&&Ye.includes(r)))&&z(n)}function Pe(e,t){const n=e.keyPath.slice();return n.push(t),n.join("|")}function te(e,t){const{op:n,key:r,value:o,calledBy:s,parentType:u,parentMeta:a,apiCtx:i}=t,p=Ee(o,i);if(!a){e[r]=p;return}const{self:d,copy:c}=a;_t({calledBy:s,parentMeta:a,op:n,key:r,parentType:u});const g=ae[u]||[];if(F(o)&&g.includes(n))return n==="slice"?d.slice:(We.includes(n)&&(a.isArrOrderChanged=!0),c?u===x||u===A?c[n].bind(c):c[n]:d[n].bind(d));if(!c)return p;const y=c[r],O=()=>{const h=b(y,i);h&&(h.isDel=!0)},E=()=>{const h=b(o,i);h&&h.isDel&&(h.isDel=!1,h.key=r,h.keyPath=a.keyPath.concat([r]),h.level=a.level+1,h.parent=a.copy,h.parentMeta=a)};if(s==="deleteProperty"){const h=b(o,i);h?h.isDel=!0:O();const P=c[r];T(P)||i.newNodeMap.delete(Pe(a,r)),delete c[r];return}T(p)||(a.newNodeStats[r]=!0,i.newNodeMap.set(Pe(a,r),{parent:c,node:p,key:r,target:null})),c[r]=p,O(),E()}function ne(e){if(T(e))return e;if(Array.isArray(e)&&e.length>0)return e.forEach(ne),Object.freeze(e);if(q(e)){const n=e;n.add=()=>n,n.delete=()=>!1,n.clear=N;for(const r of n.values())Object.freeze(r);return Object.freeze(e)}if(W(e)){const n=e;n.set=()=>n,n.delete=()=>!1,n.clear=N;for(const r of n.values())Object.freeze(r);return Object.freeze(e)}return Object.getOwnPropertyNames(e).forEach(n=>{const r=e[n];ne(r)}),Object.freeze(e)}const gt=["length","constructor","asymmetricMatch","nodeType","size"],Ce={};gt.forEach(e=>Ce[e]=1);const Et={[S]:1,[x]:1,[A]:1},re=new Map;function Ae(e){var t,n,r,o,s;const u=e||{},a=u.onOperate,i=!!a,p=u.customKeys||[],d=u.fastModeRange||le.fastModeRange,c=(t=u[ce])!==null&&t!==void 0?t:!1,g=(n=u.readOnly)!==null&&n!==void 0?n:!1,y=u.disableWarn,O=(r=u.compareVer)!==null&&r!==void 0?r:!1,E=(o=u.debug)!==null&&o!==void 0?o:!1,h=(s=u.autoFreeze)!==null&&s!==void 0?s:le.autoFreeze,P=ct(),v={metaMap:new Map,newNodeMap:new Map,debug:E,metaVer:P};Z.set(P,v);const Te=()=>(y||console.warn("can not mutate state at readOnly mode!"),!0),V=(L,R,m)=>{const{mayProxyVal:l,parentMeta:f,value:_,isCustom:M=!1}=m;let C=!1;if(!a)return{isChanged:C,mayProxyVal:l};const J=f||{},{selfType:I="",keyPath:Re=[],copy:Tt,self:we,modified:Dt,proxyVal:Rt}=J||{};let Fe=!1;m.isChanged!==void 0?C=m.isChanged:(ae[I]||[]).includes(R)?(Fe=!0,C=($e[I]||[]).includes(R)):L!=="get"&&(C=f?(Dt?Tt:we)[R]!==_:!0);let oe=null,se=!1;return a({immutBase:c,parent:we,parentType:I,parentProxy:Rt,op:L,replaceValue:be=>{se=!0,oe=be},getReplaced:()=>({isReplaced:se,replacedValue:oe}),isBuiltInFnKey:Fe,isChanged:C,isCustom:M,key:R,keyPath:Re,fullKeyPath:Re.concat(R),value:_,proxyValue:l}),{mayProxyVal:se?oe:l,isChanged:C}},De=(()=>{let L=!0;const R={get:(m,l)=>{if(ie===l)return P;const f=m[l];if(ze.includes(l))return F(f)?f.bind(m):f;if(l==="__proto__"||l==="toJSON"&&!ue(m,l))return f;let _=f;const M=D(m,v);if(p.includes(l))return V("get",l,{parentMeta:M,mayProxyVal:_,value:f,isChanged:!1,isCustom:!0}).mayProxyVal;const C=M==null?void 0:M.selfType;return Et[C]&&Ce[l]?((l==="length"||l==="size")&&V("get",l,{parentMeta:M,mayProxyVal:_,value:f}),M.copy[l]):(_=ht(f,{key:l,compareVer:O,parentMeta:M,parentType:C,ver:P,traps:R,parent:m,fastModeRange:d,immutBase:c,readOnly:g,apiCtx:v,hasOnOperate:i}),C===S&&Q(l)?V("get",l,{parentMeta:M,mayProxyVal:_,value:f}).mayProxyVal:Le[C]?(_=te(m,{op:l,key:l,value:f,metaVer:P,calledBy:"get",parentType:C,parentMeta:M,apiCtx:v}),V("get",l,{parentMeta:M,mayProxyVal:_,value:f}).mayProxyVal):V("get",l,{parentMeta:M,mayProxyVal:_,value:f}).mayProxyVal)},set:(m,l,f)=>{let _=f;const M=D(m,v);if(ye(f))if(dt(f,P)){if(_=Ee(f,v),_===m[l])return!0}else L=!1;if(g)return V("set",l,{parentMeta:M,isChanged:!1,value:_}),Te();if(M&&M.selfType===S){if(M.copy&&M.__callSet&&Q(l))return V("set",l,{parentMeta:M,value:_}),M.copy[l]=_,!0;M.__callSet=!0}let C=!1;return a?C=V("set",l,{parentMeta:M,value:_}).isChanged:C=(M.modified?M.copy:M.self)[l]!==f,C&&te(m,{parentMeta:M,key:l,value:_,metaVer:P,calledBy:"set",apiCtx:v}),!0},deleteProperty:(m,l)=>{const f=D(m,v),_=m[l];return g?(V("del",l,{parentMeta:f,isChanged:!1,value:_}),Te()):(V("del",l,{parentMeta:f,isChanged:!0,value:_}),te(m,{parentMeta:f,op:"del",key:l,value:"",metaVer:P,calledBy:"deleteProperty",apiCtx:v}),!0)},apply:function(m,l,f){return m.apply(l,f)}};return{createDraft:m=>{if(T(m))throw new Error("base state can not be primitive");let l=m;const f=D(m,v);if(f){if(c&&f.isImmutBase)return f.proxyVal;l=f.self}const _=ge("",l,{ver:P,traps:R,immutBase:c,readOnly:g,compareVer:O,apiCtx:v,hasOnOperate:i});return _e(_),_.execOnOperate=V,re.set(_.proxyVal,De.finishDraft),_.proxyVal},finishDraft:m=>{const l=D(m,v);if(!l)throw new Error("rootMeta should not be null!");if(l.level!==0)throw new Error("can not finish sub draft node!");if(l.isImmutBase)return m;let f=mt(l,v);return h&&L&&(f=ne(f)),Z.delete(P),f}}})();return De}function It(e){const t=getDraftMeta(e);return t?t.self:e}function Bt(e){const t=getDraftMeta(e);return t?deepCopy(t.copy||t.self):e}function Ot(e){return!e||T(e)||(e[H]=!0),e}const Pt={has:ue,noop:N,isObject:K,isMap:W,isSet:q,isFn:F,isPrimitive:T,isPromiseFn:pe,isPromiseResult:de,isSymbol:tt,isMardedRaw:nt,canBeNum:Q,isDraft:ye,isDiff:he,shallowCompare:lt,getDraftMeta:b,getDataType:fe},Ct=Be;function Se(e,t){return Ae(t).createDraft(e)}function ve(e){const t=re.get(e);if(!t)throw new Error("Not a Limu root draft or draft has been finished!");return re.delete(e),t(e)}function xe(e){if(!F(e))throw new Error("produce callback is not a function")}function At(e,t){if(pe(e)||de(t))throw new Error("produce callback can not be a promise function or result")}function Ve(e,t,n){xe(t);const r=Se(e,n),o=t(r);return At(t,o),ve(r)}function St(e,t,n){if(!t||!F(t)){const r=e,o=t;return xe(e),s=>Ve(s,r,o)}return Ve(e,t,n)}const vt=St,Ut=null;function Ht(e){return deepCopyFn(e)}function xt(e,t){return Ae(Object.assign(Object.assign({},t||{}),{readOnly:!0,[ce]:!0})).createDraft(e)}function Yt(e){conf.autoFreeze=e}function Gt(){return conf.autoFreeze}const Wt=null,Vt=Ot,Jt=null}}]);
